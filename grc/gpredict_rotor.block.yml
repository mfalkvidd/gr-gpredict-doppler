id: gpredict_rotor
label: GPredict Rotor
category: '[GPredict]'

parameters:
-   id: gpredict_host
    label: Local Listening IP
    dtype: enum
    options: [localhost, 0.0.0.0]
    option_labels: [Localhost, All IPs]
-   id: gpredict_port
    label: Listening Port
    dtype: int
    default: '4533'
-   id: minEl
    label: Min Elevation
    dtype: float
    default: '20.0'
-   id: verbose
    label: Verbose
    dtype: bool
    default: 'True'
    options: ['True', 'False']
    option_labels: ['Yes', 'No']

outputs:
-   domain: message
    id: az_el
    optional: true
-   domain: message
    id: state
    optional: true

templates:
    imports: import gpredict
    make: gpredict.rotor(${minEl}, "${gpredict_host}", ${gpredict_port}, ${verbose})

documentation: |-
    This block is a rotctl-compatible block for receiving azimuth (az) and elevation (el) commands from external systems such as gpredict.  The system listens on a TCP connection for the appropriate command, and when received sets the specified flowgraph variable to the received value.  The azimuth and elevation are also output on a message block as metadata values (az and el) that can be used by other blocks.

file_format: 1
